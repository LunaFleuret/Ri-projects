# データの追加方法マニュアル

新しい配信の字幕データをデータベースに追加する手順を解説します。

## 1. 字幕データの準備

新しい動画の字幕ファイル（`.vtt`形式）を以下のフォルダに保存してください。

**保存先フォルダ:**
`d:\薫衣りぃ\RAG\字幕データ`

**ファイル名のルール:**
ファイル名は以下の形式である必要があります（自動ダウンロードツールなどが生成する形式です）。
`YYYYMMDD_タイトル_動画ID.ja.vtt`

例: `20251125_新しい配信のタイトル_AbCdEfGhIjK.ja.vtt`

*   **YYYYMMDD**: 配信日（例: 20251125）
*   **タイトル**: 動画のタイトル
*   **動画ID**: YouTubeの動画ID（11桁の英数字）
*   **.ja.vtt**: 拡張子

## 2. データベースの更新

データをフォルダに入れたら、データベースを更新して新しいデータを検索できるようにします。

1.  **ターミナル（PowerShellなど）を開きます。**
    *   VS Codeを使用している場合は、メニューの「ターミナル」→「新しいターミナル」で開けます。

2.  **以下のコマンドを入力してエンターキーを押します。**

    ```powershell
    python rebuild_db.py
    ```

3.  **処理が完了するのを待ちます。**
    *   画面に `Processed ... lines...` と表示され、最後に `Database rebuild complete.` と表示されれば完了です。

## 3. アプリの確認

アプリが既に起動している場合は、ブラウザの更新ボタン（F5キー）を押すか、右上のメニューから「Rerun」を選択して再読み込みしてください。
新しいデータが検索結果に表示されるようになります。

---

## トラブルシューティング

*   **エラーが出る場合:**
    *   ファイル名が正しい形式になっているか確認してください。特に「動画ID」の部分（最後の `_` の後ろ）が重要です。
    *   Pythonがインストールされているか確認してください。
*   **検索に出てこない場合:**
    *   `rebuild_db.py` を実行したか確認してください。
    *   アプリを再読み込みしたか確認してください。
